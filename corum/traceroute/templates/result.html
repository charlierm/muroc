{% extends "navbar.html" %}
{% block content %}

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="{{STATIC_URL}}js/gmaps.js"></script>

<div id="mapCanvas" class="span12">
</div>
<script>
$(document).ready(function(){
 var map = new GMaps({
    el: '#mapCanvas',
    lat: 51.5073346,
    lng: -0.1276831,
    height: '500px',
    zoom: 3
  });
$.getJSON("{{ result.pk }}.json", function(data) {
    var line = new Array(data.length)
    for (var i = 0; i < data.length; i++) {
        line[i] = [data[i]['location'][0], data[i]['location'][1]]
        map.addMarker({
            lat: data[i]['location'][0],      
            lng: data[i]['location'][1],
            title: data[i]['ip_address'],
            infoWindow: {
                content: data[i]['hop_num'] + '<br />' + 'IP: ' + 
                data[i]['ip_address'] + '<br />Rtt: ' + 
                data[i]['rtt'] + '<br />Hostname: ' + 
                data[i]['hostname']
            }
        });
    };
    map.drawPolyline({
        path: line,
        strokeColor: '#131540',
        strokeOpacity: 0.6,
        strokeWeight: 6
    });
});

});
</script>
{% endblock %}